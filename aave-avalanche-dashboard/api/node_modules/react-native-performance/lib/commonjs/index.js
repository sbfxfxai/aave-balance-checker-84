"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "PerformanceObserver", {
  enumerable: true,
  get: function () {
    return _instance.PerformanceObserver;
  }
});
exports.setResourceLoggingEnabled = exports.default = void 0;
var _reactNative = require("react-native");
var _performanceEntry = require("./performance-entry");
var _resourceLogger = require("./resource-logger");
var _instance = require("./instance");
const isTurboModuleEnabled = global.RN$Bridgeless || global.__turboModuleProxy != null;
const RNPerformanceManager = isTurboModuleEnabled ? require('./NativeRNPerformanceManager').default : _reactNative.NativeModules.RNPerformanceManager;
if (_reactNative.Platform.OS === 'android' || RNPerformanceManager) {
  const emitter = new _reactNative.NativeEventEmitter(RNPerformanceManager);
  emitter.addListener('mark', data => {
    (0, _instance.addEntry)(new _performanceEntry.PerformanceReactNativeMark(data.name, data.startTime, data.detail));
  });
  emitter.addListener('metric', data => {
    (0, _instance.addEntry)(new _performanceEntry.PerformanceMetric(data.name, {
      startTime: data.startTime,
      value: data.value,
      detail: data.detail
    }));
  });
}
var _default = _instance.performance;
exports.default = _default;
const setResourceLoggingEnabled = function () {
  let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
  if (enabled) {
    //@ts-ignore
    (0, _resourceLogger.installResourceLogger)(globalThis, _instance.performance, _instance.addEntry);
  } else {
    (0, _resourceLogger.uninstallResourceLogger)(globalThis);
  }
};
exports.setResourceLoggingEnabled = setResourceLoggingEnabled;
//# sourceMappingURL=index.js.map